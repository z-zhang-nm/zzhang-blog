---
title: "032 最长有效括号"
date: 2020-09-09T11:19:31+08:00
categories:
- Leetcode
- 字符串
tags:
- 动态规划
keywords:
- tech
#thumbnailImage: //example.com/image.jpg
---
[题目链接](https://leetcode-cn.com/problems/longest-valid-parentheses/)
<!--more-->
　　给定一个只包含 '(' 和 ')' 的字符串，找出最长的包含有效括号的子串的长度。

　　示例1：
> 输入: "(()"  
输出: 2  
解释: 最长有效括号子串为 "()"

　　示例2：
> 输入: ")()())"  
输出: 4  
解释: 最长有效括号子串为 "()()"

## 题解一
　　用一个栈保存左括号，从头开始遍历字符串，若遇到左括号，则压栈，若遇到右括号，则判断栈是否为空，若为空，说明当前右括号不能组成对，若不为空，长度加2，弹出一个左括号。

　　这样得到的实际是**字符串中有效括号的总长度**，而不是**子串**，比如`()(()`，返回结果为4，实际上结果应该是2。

```cpp
int longestValidParentheses(string s) {
    stack<char> stk;
    int max_len = 0, curr_len = 0;
    for(int i = 0; i < s.size(); ++i) {
        if(s[i] == ')'){
            if(stk.empty()){
                curr_len = 0;
                continue;
            }
            curr_len += 2;
            max_len = max(max_len, curr_len);
            stk.pop();
        }else{
            stk.push('(');
        }
    }
    return max_len;
}
```