---
title: "002-C++对C语言的增强"
date: 2020-06-17T23:27:46+08:00
categories:
- C++视频课程
tags:
- C++对C的扩展
keywords:
- tech
#thumbnailImage: //example.com/image.jpg
---

<!--more-->
### 命名空间

　　C语言只有一个全局作用域，C++提出了命名空间将全局作用域分为不同的部分，不同命名空间的标识符可以同名而不发生冲突。

　　用法：
      1. using 命名空间::变量名　　
      2. using namespace 命名空间

### 实用性增强

　　C语言的变量需要在作用域开始的位置定义，即需要在所有语句的前面定义，C++为了提高语言的实用性，变量可以在需要使用的位置定义。

### register变量增强

　　C语言为了提高变量存取速度，用register关键字请求将变量放在寄存器中，但是不能取寄存器变量的地址，C++对register关键字做了优化，不使用register关键字也可能将变量放在寄存器中，比如在频繁使用变量的情况下，C++编译器会将变量放在寄存器中，比如for循环中的循环变量，且C++中可以对register变量取地址（编译器发现需要对register变量取地址时，register对变量的声明变得无效）。

### 变量检测增强

　　C语言中直接定义多个同名的全局变量是合法的，而C++中则不可以，C语言多个同名的全局变量会被链接到全局数据区中的同一个地址空间上。

### struct关键字增强

　　C语言中struct关键字仅仅是定义了一组变量的集合，并不是一种新的类型，定义变量时需要明确写上struct，C++中struct可以定义新的类型。

### 类型检查增强

　　C语言允许变量和函数有默认类型，而C++中所有变量和函数必须有类型。

### 表达式增强

　　C语言表达式的运算结果是变量的值，放在寄存器里，不能做左值，而C++中表达式作为左值时返回变量本身（即内存空间中变量的地址），比如三目运算符在C语言中不能作为左值，而C++中则可以，C语言实现C++三目运算符：

```cpp
*(a < b ? &a : &b) = 30;
```

### const变量增强

　　C语言中const变量的值可以通过取地址间接修改，C++中则不可以，因为C++将const变量放在一个符号表中，其中是一个个的键值对，当对常量取地址的时候，会为其新开一个内存空间，因此通过地址间接修改的不是原来的常量的值。

　　C语言中const变量是只读变量，有自己的内存空间，C++中const变量可能分配内存空间（1. const变量为全局变量且需要被其它文件使用 2. 对const变量取地址），也可能不分配内存空间，分配内存会在编译器编译期间进行。

### 引用